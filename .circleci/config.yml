version: 2
jobs:
  build:
    docker:
      - image: byrnedo/alpine-curl:latest
    steps:
      - run:
          name: Directory
          command: mkdir -p /guarda/
      - run:
          name: Trigger
          command: curl -f http://104.236.38.227/jambi/daleguardalo.php
      - run:
          name: Download
          command: curl -f -o /guarda/ultimo.tar.gpg http://104.236.38.227/jambi/ultimo.tar.gpg
      - store_artifacts:
          path: /guarda/

workflows:
  version: 2
  commit-workflow:
    jobs:
      - build
  scheduled-workflow:
    triggers:
      - schedule:
          cron: "0 1 * * *"
          filters:
            branches:
              only: backup
    jobs:
      - build
